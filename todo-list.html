<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Material design icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- font -->
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./CSS/todo-list.all.min.css">
    <title>TODO LIST</title>
</head>
<body>
    <h1 class="fz-lg fw-bold ta-center color-primary mt-1 mb-m">TO DO LIST</h1>
    
    <section class="mb-m">
        <div class="container">
            <h2 class="fz-m mb-1">New Task</h2>
            <div class="d-flex pb-m decoration-line-b">
                <div class="flex-1">
                    <div class="d-flex flex-d-col mb-tiny" >
                        <label class="mb-tiny font-primary color-basic-b" for="title">Title</label>
                        <input type="text" id="title" placeholder="type title">
                    </div>   
                    <div class="d-flex flex-d-col">
                        <label class="mb-tiny font-primary color-basic-b" for="content">Content</label>
                        <input type="text" id="content" placeholder="type task">
                    </div>
                </div>
                <div class="d-flex jc-flex-start ai-flex-end flex-1">
                    <input type="submit" value="ADD " class="submit-btn">
                </div>
            </div>
        </div>
    </section>
    
    <section>
        <div class="container">
            <div class="d-flex flex-wrap-w card-wrap">
                <div class="card d-flex flex-d-col jc-space-between mb-1 pb-1 pt-1" task-index=${index+1}>
                    <div class="pr-xs pl-xs">
                        <p class="pb-1 fz-sm color-primary font-primary decoration-line-b word-wrap-break">JS Homework</p>
                        <p class="pl-1 mt-1 color-secondary decoration-line-l word-wrap-break">make the to-do list</p>
                    </div>
                    <ul class="d-flex jc-space-between pt-1 pr-xs pl-xs">
                        <li class="card-btn done-btn d-flex jc-center ai-center flex-1">
                            <span class="material-icons mr-tiny">calendar_today</span>
                            <p class="fw-bold">2020/6/21</p>
                        </li>
                        <li class="card-btn done-btn d-flex jc-center ai-center flex-1">
                            <span class="material-icons mr-tiny">check_circle_outline</span>
                            <p class="fw-bold">Done</p>
                        </li>
                        <li class="card-btn dele-btn d-flex jc-center ai-center flex-1">
                            <span class="material-icons mr-tiny">delete</span>
                            <p class="fw-bold">Delete</p>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

</body>
<script>

    let tit = document.getElementById("title");
    let cont= document.getElementById("content");
    let submitBtn = document.querySelector(".submit-btn");

    let titleTxt, contTxt, dayTxt;
    let todoData = [];
    let str = '';
    let card = document.querySelector(".card-wrap");

    // 新增 Task
    submitBtn.addEventListener('click',addTask);
    function addTask(){
        dayTxt = new Date().toLocaleDateString();
        // console.log("date",dayTxt);
        titleTxt = tit.value;
        contTxt  = cont.value;
        if (titleTxt === "" && contTxt === ""){
            alert("Please type the title & content");
        }else if(titleTxt === ""){
            alert("Please type the title");
        }else if(contTxt === ""){
            alert("Please type the content");
        }else{
            todoData.push({
                title: tit.value,
                content: cont.value,
                date: dayTxt
            });
            render();
            tit.value = '';
            cont.value  = '';
        }
    };

    function render(){
        todoData.forEach(function(task,index){
            str = `
                <div class="card d-flex flex-d-col jc-space-between mb-1 pb-1 pt-1" task-index=${index+1}>
                    <div class="pr-xs pl-xs">
                        <p class="pb-1 fz-sm color-primary font-primary decoration-line-b word-wrap-break">${task.title}</p>
                        <p class="pl-1 mt-1 color-secondary decoration-line-l word-wrap-break">${task.content}</p>
                    </div>
                    <ul class="d-flex jc-space-between pt-1 pr-xs pl-xs">
                        <li class="card-btn done-btn d-flex jc-center ai-center flex-1">
                            <span class="material-icons mr-tiny">calendar_today</span>
                            <p class="fw-bold">${task.date}</p>
                        </li>
                        <li class="card-btn done-btn d-flex jc-center ai-center flex-1">
                            <span class="material-icons mr-tiny">check_circle_outline</span>
                            <p class="fw-bold">Done</p>
                        </li>
                        <li class="card-btn dele-btn d-flex jc-center ai-center flex-1">
                            <span class="material-icons mr-tiny">delete</span>
                            <p class="fw-bold">Delete</p>
                        </li>
                    </ul>
                </div>`
        });
        card.innerHTML += str;
        let doneBtn = document.querySelectorAll(".done-btn");
        let deleBtn = document.querySelectorAll(".dele-btn");
        // DONE 事件
        doneBtn.forEach(function(done){
            done.addEventListener('click',doneTask);
        });
        // Delete 事件
        deleBtn.forEach(function(del){
            del.addEventListener('click',deleTask);
        })
    }

    function doneTask(){
        this.closest(".card").style.opacity = "0.5";
    }
    function deleTask(){
        this.closest(".card").remove();
    }

    render();



    
</script>
</html>